<h1>Lectures Table</h1>
<table>
  <tr>
    <th>Time/Date</th>
    <th>Sunday</th>
    <th>Monday</th>
    <th>Tuesday</th>
    <th>Wednesday</th>
    <th>Thursday</th>
    <th>Friday</th>
    <th>Saturday</th>
  </tr>
  <%
    # @timetable is a hash with keys of the form [28800, 'Sunday'], [28800, 'Monday'], ...
    # where 28800 is the number of seconds since the beginning of the day and 'Sunday' is the day
    (28800..52200).step(1800).each do |seconds|
      concat "<tr>".html_safe
        _start = seconds / 3600.0
        concat "<th>#{_start} - #{_start + 0.5}</th>".html_safe
      ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'].each do |day|
        if(@timetable[[seconds, day]])
          concat "<td class='marked'>1</td>".html_safe
        else
          concat "<td>0</td>".html_safe
        end
      end
      concat "</tr>".html_safe
    end
  %>
</table>